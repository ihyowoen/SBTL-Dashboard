<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 정부 지원사업 Watchlist (SBTL v8.3 Final)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- PapaParse -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    
    <style>
        body { font-family: 'Roboto', 'Noto Sans KR', sans-serif; background-color: #f8fafc; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 20px; }
        .memo-area { transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
        .memo-area:focus-within { background-color: #fff; border-color: #6366f1; box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1); }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .tabular-nums { font-variant-numeric: tabular-nums; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); background-color: #e2e8f0; gap: 1px; border: 1px solid #e2e8f0; border-radius: 0 0 16px 16px; overflow: hidden; }
        .calendar-cell { background-color: white; min-height: 140px; padding: 8px; display: flex; flex-direction: column; cursor: pointer; transition: background-color 0.2s; }
        .calendar-cell:hover { background-color: #f8fafc; }
        .calendar-header { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; font-weight: 800; background-color: #fff; border-bottom: 1px solid #e2e8f0; padding: 16px 0; font-size: 0.95rem; color: #64748b; border-radius: 16px 16px 0 0; }
        @keyframes slideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .toast-enter { animation: slideUp 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes zoomIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .modal-overlay { animation: fadeIn 0.2s ease-out; }
        .modal-content { animation: zoomIn 0.2s ease-out; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // [LIVE] 구글 스프레드시트 연동 (웹에 게시된 CSV 링크 - v8.3 업데이트)
        const GOOGLE_SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTErH9vagDQpDD-kL-Be6R1GIQullxNOdWSGRTlJLsaM5kM3QVWAKLXeueINGTz8A6tdRg3dIYgLKfg/pub?gid=0&single=true&output=csv";

        const PERSONAS = { ALL: '전체', SBTL: 'SBTL 첨단소재 맞춤' };
        const STATUSES = ['전체', '접수중', '마감임박', '접수예정', '마감'];

        // [DATA] 내장 데이터 (구글 시트 연동 실패 시 보여줄 안전장치 - 최신 데이터 반영)
        const RAW_DATA = [
            { id: 801, start: '2026-01-02', end: '2026-01-31', title: '2026년 화성시 중소기업 육성자금 지원사업 (운전/시설자금)', source: '[화성] 지자체·산하기관', url: 'https://platform.hsbiz.or.kr/business/list', category: '금융·자금' },
            { id: 802, start: '2026-01-20', end: '2026-02-14', title: '2026년 화성시 국내외 전시회 참가비 지원사업', source: '[화성] 지자체·산하기관', url: 'https://platform.hsbiz.or.kr/business/list', category: '수출·판로' },
            { id: 803, start: '2026-02-01', end: '2026-11-30', title: '2026년 화성시 기술닥터(기술애로 해결) 지원사업', source: '[화성] 지자체·산하기관', url: 'https://platform.hsbiz.or.kr/business/list', category: 'R&D·기술' },
            { id: 401, start: '2025-12-17', end: '2026-01-09', title: '2026년 글로벌 강소기업 1000+프로젝트 참여기업 모집공고', source: '[경기] 지자체·산하기관', url: 'https://www.egbiz.or.kr/sp/supportPrjOutsideList.do', category: '수출·판로' },
            { id: 402, start: '2025-12-15', end: '2026-12-31', title: '경기R&DB센터, 광교비즈니스센터 입주기업 모집', source: '[경기] 지자체·산하기관', url: 'https://www.egbiz.or.kr/sp/supportPrjOutsideDtl.do?listUrl=supportPrjOutsideList&bizCyclId=PD000000050904', category: '창업·입주' },
            { id: 403, start: '2025-12-09', end: '2026-01-16', title: '경기도 소공인 복합지원센터 확대구축사업 참여기관 추가 모집', source: '[경기] 지자체·산하기관', url: 'https://www.egbiz.or.kr/sp/supportPrjOutsideDtl.do?listUrl=supportPrjOutsideList&bizCyclId=PD000000050844', category: '지역특화' },
            { id: 404, start: '2025-12-08', end: '2026-01-07', title: '2026년도 정부형 스마트공장 구축사업 공고 (경기TP)', source: '[경기] 지자체·산하기관', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116263', category: '기술도입' },
            { id: 301, start: '2026-01-12', end: '2026-02-13', title: '[화성] 2026년 화성청년 취업역량강화 사업 참여기업 모집', source: '[화성] 지자체·산하기관', url: 'https://platform.hsbiz.or.kr/business/detail/N/1077', category: '인력·교육' },
            { id: 302, start: '2026-01-12', end: '2026-02-06', title: '2026년 스마트 생태공장 구축사업 공고', source: '환경부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116926', category: 'R&D·기술' },
            { id: 303, start: '2025-12-22', end: '2026-01-16', title: '2026년 대ㆍ중소기업 안전보건 상생협력사업 공고', source: '고용노동부', url: 'https://www.moel.go.kr/info/publict/publictView.do?bbs_seq=20251201295', category: '경영·컨설팅' },
            { id: 304, start: '2025-12-15', end: '2026-01-23', title: '2026년 자동차ㆍ조선산업 발전 유공 자동차산업 포상 공고', source: '산업통상자원부', url: 'https://www.motie.go.kr/kor/article/ATCLf724eb567/212722/view', category: '행사·네트워킹' },
            { id: 305, start: '2025-12-15', end: '2026-10-30', title: '산업혁신기반구축사업 과제 (금형기반 생산기술 디지털전환) 수혜기업 모집', source: '산업통상자원부', url: 'https://platform.hsbiz.or.kr/business/detail/N/1075', category: 'R&D·기술' },
            { id: 306, start: '2026-01-01', end: '2026-12-31', title: '2026년 스마트제조혁신 지원사업 통합공고', source: '중소벤처기업부', url: 'https://www.smart-factory.kr/usr/bg/ba/ma/bsnsPblanc/view.do?bbsSeq=1023', category: 'R&D·기술' },
            { id: 601, start: '2025-12-22', end: '2026-01-09', title: '2026년 수출지원기반활용사업 참여기업 모집 공고 (산업부 산업바우처)', source: '산업통상자원부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116978', category: '수출·판로' },
            { id: 701, start: '2025-11-13', end: '2026-02-28', title: '2026년도 과학기술정보통신부 기초연구사업 1차 신규과제 공모 (선도연구센터 등)', source: '과학기술정보통신부', url: 'https://www.msit.go.kr/bbs/view.do?sCode=user&mId=311&mPid=121&bbsSeqNo=100&nttSeqNo=3186344', category: 'R&D·기술' },
            { id: 702, start: '2025-12-11', end: '2026-01-30', title: '2026년 ICT 학점연계 프로젝트 인턴십 국내/글로벌 과정 모집', source: '과학기술정보통신부', url: 'https://msit.go.kr/bbs/view.do?sCode=user&mPid=121&mId=311&bbsSeqNo=100&nttSeqNo=3186354', category: '인력·교육' },
            { id: 703, start: '2025-11-06', end: '2026-04-15', title: '2026년도 정보통신 및 정보문화 유공 정부포상 계획 공고', source: '과학기술정보통신부', url: 'https://www.msit.go.kr/bbs/view.do?sCode=user&mId=311&mPid=121&bbsSeqNo=100&nttSeqNo=3186333', category: '행사·네트워킹' },
            { id: 1, start: '2025-12-22', end: '2026-01-28', title: 'AI컴퓨팅자원 활용기반 강화사업 (첨단 GPU 활용 지원)', source: '정보통신산업진흥원', url: 'https://www.nipa.kr/home/2-2/16423', category: 'R&D·기술' },
            { id: 2, start: '2025-12-19', end: '2026-12-31', title: '2026년도 하노이IT지원센터 공용공간 이용기업 모집', source: '정보통신산업진흥원', url: 'https://www.nipa.kr/home/2-2/16421', category: '수출·판로' },
            { id: 3, start: '2025-12-19', end: '2026-01-19', title: '2026년 지역 가상융합산업혁신센터 모집 공고', source: '정보통신산업진흥원', url: 'https://www.nipa.kr/home/2-2/16417', category: 'R&D·기술' },
            { id: 4, start: '2025-12-15', end: '2025-12-31', title: '하노이IT지원센터 2026년 한-베 협력 한국 IT스타트업 지원사업 공모', source: '정보통신산업진흥원', url: 'https://www.nipa.kr/home/2-2/16416', category: '수출·판로' },
            { id: 5, start: '2025-12-19', end: '2026-12-31', title: '2026년 SW분야 퇴직예정자 전직지원사업 수행기관 모집 공고', source: '중소벤처기업부', url: 'https://www.mss.go.kr/site/smba/ex/bbs/List.do?cbIdx=81', category: '인력·교육' },
            { id: 6, start: '2025-12-24', end: '2026-01-05', title: '상호금융업감독규정 일부개정고시안 규정변경예고', source: '금융위원회', url: 'https://www.fsc.go.kr/po040301/83572', category: '정책·규제' },
            { id: 7, start: '2025-12-24', end: '2026-02-02', title: '금융투자업규정 일부개정고시안 규정변경예고', source: '금융위원회', url: 'https://www.fsc.go.kr/po040301/83571', category: '정책·규제' },
            { id: 8, start: '2025-12-24', end: '2026-02-02', title: '서민의 금융생활 지원에 관한 법률 시행령 일부개정령(안) 입법예고', source: '금융위원회', url: 'https://www.fsc.go.kr/po040301/83570', category: '정책·규제' },
            { id: 9, start: '2025-12-23', end: '2025-12-23', title: '2026년 10대 메가프로젝트 기술산업화 사업공고', source: '산업통상자원부', url: 'https://www.motie.go.kr/kor/article/ATCLc01b2801b/70720/view', category: 'R&D·기술' },
            { id: 10, start: '2025-12-23', end: '2025-12-23', title: '2026년 기업수요기반 1% MVP 프로젝트 사업 공고', source: '산업통상자원부', url: 'https://www.motie.go.kr/kor/article/ATCLc01b2801b/70719/view', category: 'R&D·기술' },
            { id: 11, start: '2025-12-23', end: '2025-12-23', title: '2026년도 산업통상부-중소벤처기업부 연구개발사업 통합 시행계획 공고', source: '산업통상자원부', url: 'https://www.motie.go.kr/kor/article/ATCLf724eb567/212790/view', category: '통합공고' },
            { id: 12, start: '2025-12-24', end: '2026-01-30', title: '2026년도 한-캐나다 탄소중립 협력플랫폼 구축·운영 사업 수행기관 모집 공고', source: '한국환경산업기술원', url: 'https://www.keiti.re.kr/site/keiti/ex/bbs/View.do?cbIdx=1289&bcIdx=35511', category: 'R&D·기술' },
            { id: 15, start: '2025-12-27', end: '2026-12-31', title: '모바일 주민등록증 시범 발급', source: '행정안전부', url: 'https://www.korea.kr/multi/visualNewsView.do?newsId=148936960', category: '정책·규제' },
            { id: 16, start: '2025-12-31', end: '2025-12-31', title: '금융투자소득세 폐지 및 관련 세법 개정안 국회 통과 여부 결정 시한', source: '국회', url: 'https://likms.assembly.go.kr/bill/main.do', category: '정책·규제' },
            { id: 17, start: '2025-12-18', end: '2026-01-05', title: '2026년 제1기 서울키움센터 입주기업 모집 공고', source: '[서울] 지자체·산하기관', url: 'https://www.seoul.go.kr/news/news_notice.do#view/435820', category: '창업·입주' },
            { id: 18, start: '2025-12-24', end: '2026-01-04', title: '한국섬진흥원 2025년도 제4차 신규직원 채용 공고 알림', source: '행정안전부', url: 'https://www.mois.go.kr/frt/bbs/type013/commonSelectBoardArticle.do?bbsId=BBSMSTR_000000000006&nttId=122624', category: '인력·교육' },
            { id: 19, start: '2026-01-19', end: '2026-01-29', title: '2026년 내수면 유·도선 현대화 이차보전사업 시행 공고', source: '행정안전부', url: 'https://www.mois.go.kr/frt/bbs/type013/commonSelectBoardArticle.do?bbsId=BBSMSTR_000000000006&nttId=122676', category: '금융·자금' },
            { id: 20, start: '2025-12-26', end: '2026-02-05', title: '도시철도법 시행령 일부개정안 입법예고', source: '국토교통부', url: 'https://www.molit.go.kr/USR/law/m_46/lst.jsp', category: '정책·규제' },
            { id: 21, start: '2025-12-22', end: '2026-01-19', title: '2026년 이화여대 캠퍼스타운 E-LIFE Challenge 창업경진대회', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116946', category: '창업·입주' },
            { id: 22, start: '2025-12-22', end: '2026-01-12', title: '2026년 이화여대 캠퍼스타운 스테이션 이화 배치 프로그램', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116945', category: '창업·입주' },
            { id: 23, start: '2025-12-23', end: '2026-01-16', title: '2026년 식품기능성평가지원 사업 공고', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116944', category: 'R&D·기술' },
            { id: 24, start: '2025-12-19', end: '2026-01-09', title: '[제주] 2026년 축산분야 보조금 지원사업 신청 공고', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116914', category: '지역특화' },
            { id: 25, start: '2025-12-22', end: '2026-01-22', title: '[경기] 남양주시 2026년 고추비가림재배시설 지원사업', source: '[경기] 지자체·산하기관', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116942', category: '지역특화' },
            { id: 26, start: '2025-12-22', end: '2026-02-05', title: '[서울] 은평구 청년식당 신규입점 청년 모집 공고', source: '[서울] 지자체·산하기관', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116913', category: '지역특화' },
            { id: 27, start: '2025-12-22', end: '2026-01-02', title: '[대전] 2025년 지역혁신 선도기업 연장 계획 공고', source: '[대전] 지자체·산하기관', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116940', category: '지역특화' },
            { id: 28, start: '2025-12-22', end: '2026-01-16', title: '[제주] 지역 AI 대전환을 위한 AI솔루션ㆍ도입 활용지원사업', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116912', category: '지역특화' },
            { id: 29, start: '2025-12-22', end: '2026-01-23', title: '2026년 K-브랜드분쟁 대응전략 지원사업 사전신청제 시행', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116939', category: '수출·판로' },
            { id: 30, start: '2025-12-22', end: '2026-01-09', title: '2026년 스페인 바르셀로나 비타푸드 전시회 한국관 참가업체', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116911', category: '수출·판로' },
            { id: 31, start: '2025-12-20', end: '2025-12-30', title: '[전남] 순천시 2025년 2차 향토기업 인증 계획 재공고', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116938', category: '지역특화' },
            { id: 32, start: '2025-12-19', end: '2025-12-26', title: '[충북] 보은군 2026년 농작물 병해충 방제비지원 약제 공모', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116937', category: '지역특화' },
            { id: 33, start: '2025-12-19', end: '2026-01-06', title: '[제주] 2025년 지역혁신 선도기업 연장계획 공고', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116936', category: '지역특화' },
            { id: 34, start: '2025-11-17', end: '2025-12-17', title: '2026년 제1회 신제품(NEP)인증 신규신청(100대 전략품목 포함) 및 유효기간 연장신청 접수 공고', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000115613', category: '인증' },
            { id: 35, start: '2026-01-01', end: '2026-01-31', title: '2025년 4분기 (최초) 고령자 고용지원금 신청서 접수 공고', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116856', category: '금융·자금' },
            { id: 36, start: '2025-12-17', end: '2026-02-02', title: '2026년 대한민국 패키징 대전 계획 공고(KOREA STAR AWARDS 2026)', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116875', category: '행사·네트워킹' },
            { id: 37, start: '2026-01-01', end: '2026-12-31', displayDate: '2026', title: '2026년 중소기업 정책자금 융자계획 공고', source: '비즈마당', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116941', category: '금융·자금' },
            { id: 38, start: '2025-12-01', end: '2026-01-15', title: '[핵심전략기술확인] 26년 1월 접수 핵심전략기술 및 품목 확인신청', source: '소부장넷', url: 'https://www.sobujang.net/', category: '인증' },
            { id: 39, start: '2025-10-21', end: '2025-12-31', title: '[공급망안정화선도사업자확인] 2025년도 선도사업자 제2차 선정계획', source: '소부장넷', url: 'https://www.sobujang.net/', category: '인증' },
            { id: 40, start: '2025-01-01', end: '2025-01-31', title: '[협력모델] 2024년도 소재·부품·장비 기업 간 협력모델 후보 모집', source: '소부장넷', url: 'https://www.sobujang.net/', category: 'R&D·기술' },
            { id: 41, start: '2025-12-03', end: '2025-12-31', title: '[공통] 2025년 공급망 안정화 대국민 연구대회 시상식 안내', source: '소부장넷', url: 'https://www.sobujang.net/', category: '행사·네트워킹' },
            { id: 42, start: '2025-12-19', end: '2026-01-23', title: '2026년도 환경기술개발사업 신규과제 추진계획 공고_(2026)블록체인 기반 살생물제 정보 지능형 공정 관리기술개발 사업', source: 'NTIS', url: 'https://www.ntis.go.kr/rndgate/eg/un/ra/view.do?roRndUid=1252219&flag=rndList', category: 'R&D·기술' },
            { id: 43, start: '2025-12-19', end: '2026-01-23', title: '2026년도 환경기술개발사업 신규과제 추진계획 공고_(2026)자생생물활용CO2저감및유용물질전환기술개발사업(RD)', source: 'NTIS', url: 'https://www.ntis.go.kr/rndgate/eg/un/ra/view.do?roRndUid=1252218&flag=rndList', category: 'R&D·기술' },
            { id: 44, start: '2025-12-19', end: '2026-01-23', title: '2026년도 환경기술개발사업 신규과제 추진계획 공고_(2026)차세대초순수생산·공급및자립형생산공정기술개발사업(RD)', source: 'NTIS', url: 'https://www.ntis.go.kr/rndgate/eg/un/ra/view.do?roRndUid=1252215&flag=rndList', category: 'R&D·기술' },
            { id: 45, start: '2025-12-19', end: '2026-01-23', title: '2026년도 환경기술개발사업 신규과제 추진계획 공고_(2026)환경보건빅데이터구축및AI활용고도화기술개발사업(RD)', source: 'NTIS', url: 'https://www.ntis.go.kr/rndgate/eg/un/ra/view.do?roRndUid=1252214&flag=rndList', category: 'R&D·기술' },
            { id: 46, start: '2025-12-19', end: '2026-01-23', title: '2026년도 환경기술개발사업 신규과제 추진계획 공고_(2026)유기성 폐자원 활용 고품질 바이오연료화 기술개발사업', source: 'NTIS', url: 'https://www.ntis.go.kr/rndgate/eg/un/ra/view.do?roRndUid=1252213&flag=rndList', category: 'R&D·기술' },
            { id: 47, start: '2025-12-19', end: '2026-01-23', title: '2026년도 환경기술개발사업 신규과제 추진계획 공고_(2026)상수도 과불화화합물 대응 기술개발사업', source: 'NTIS', url: 'https://www.ntis.go.kr/rndgate/eg/un/ra/view.do?roRndUid=1252210&flag=rndList', category: 'R&D·기술' },
            { id: 48, start: '2026-01-01', end: '2026-06-30', displayDate: '2026 상반기', title: '서대문청년창업센터 기업입주공간 2026년 상반기 입주기업 모집 공고', source: 'K-Startup', url: 'https://www.k-startup.go.kr/', category: '창업·입주' },
            { id: 49, start: '2026-01-01', end: '2026-12-31', displayDate: '2026', title: '2026년 초격차 스타트업 프로젝트 민간검증 트랙 대·중견기업 추천 공고', source: 'K-Startup', url: 'https://www.k-startup.go.kr/', category: '창업·입주' },
            { id: 50, start: '2026-01-01', end: '2026-12-31', displayDate: '2026', title: '(연장) 2026년 창업존 운영사업 주관기관 모집', source: 'K-Startup', url: 'https://www.k-startup.go.kr/', category: '창업·입주' },
            { id: 51, start: '2026-01-01', end: '2026-12-31', displayDate: '2026', title: '2026년 대비 창업 초보를 위한 창업 A-Z 교육', source: 'K-Startup', url: 'https://www.k-startup.go.kr/', category: '창업·입주' },
            { id: 52, start: '2025-12-19', end: '2025-12-26', title: '2026년 자동차산업기술개발 신규 기획 과제 인터넷공시', source: '한국산업기술기획평가원', url: 'https://srome.keit.re.kr/srome/biz/perform/opnnPrpsl/retrieveIntrnDsclsDtlView.do?prgmId=XPG201020000&sbjtPlnnAncmId=000929', category: 'R&D·기술' },
            { id: 53, start: '2025-12-19', end: '2025-12-24', title: '2026년도 반도체분야 산업기술 R&D 기획대상과제 인터넷 공시', source: '한국산업기술기획평가원', url: 'https://srome.keit.re.kr/srome/biz/perform/opnnPrpsl/retrieveIntrnDsclsDtlView.do?prgmId=XPG201020000&sbjtPlnnAncmId=000928', category: 'R&D·기술' },
            { id: 54, start: '2025-12-24', end: '2026-01-23', title: '산업혁신기반구축사업 로드맵(26_28) 신규 수요조사', source: '한국산업기술진흥원', url: 'https://www.kiat.or.kr/front/board/boardContentsListPage.do?board_id=90', category: 'R&D·기술' },
            { id: 55, start: '2026-01-05', end: '2026-01-13', title: '2026년 첨단산업 특성화대학 재정지원 사업 및 특성화대학 지정 신청 통합 공고', source: '한국산업기술진흥원', url: 'https://www.kiat.or.kr/front/board/boardContentsView.do?contents_id=51cf64179130454aa7008971587f396f', category: 'R&D·기술' },
            { id: 56, start: '2026-01-19', end: '2026-01-22', title: '2026년 첨단산업 인재양성 부트캠프 사업공고', source: '한국산업기술진흥원', url: 'https://www.kiat.or.kr/front/board/boardContentsView.do?contents_id=166a152a632b42adba844f0d0568d38e', category: 'R&D·기술' },
            { id: 57, start: '2025-12-17', end: '2026-01-09', title: '2026년 1차 수출지원기반활용사업 참여기업 모집 공고 (수출바우처)', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C128/AS/74/view.do?pblancId=PBLN_000000000116842', category: '수출·판로' },
            { id: 58, start: '2025-12-08', end: '2026-01-07', title: '2026년도 자율형공장 구축 지원사업 공고 (스마트공장)', source: '중소벤처기업부', url: 'https://www.smart-factory.kr', category: '기술도입' },
            { id: 59, start: '2026-01-06', end: '2026-01-23', title: '2026년도 창업성장기술개발사업(디딤돌) 제1차 시행계획 공고', source: '중소벤처기업부', url: 'https://www.mss.go.kr/site/smba/ex/bbs/View.do?cbIdx=310&bcIdx=1064287', category: 'R&D·기술' },
            { id: 60, start: '2026-01-05', end: '2026-02-13', title: '2026년도 클라우드 종합솔루션 지원사업 참여기업 모집 공고', source: '중소벤처기업부', url: 'https://www.mss.go.kr/site/smba/ex/bbs/View.do?cbIdx=310&bcIdx=1064059', category: '기술도입' },
            { id: 61, start: '2025-12-18', end: '2026-01-05', title: '2026년도 혁신형기업 경쟁력강화사업 보조사업자 모집 공고', source: '중소벤처기업부', url: 'https://www.mss.go.kr/site/smba/ex/bbs/View.do?cbIdx=310&bcIdx=1064057', category: '금융·자금' },
            { id: 501, start: '2025-12-26', end: '2026-01-15', title: '중소기업기술개발 지원사업 운영요령 일부개정 행정예고', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86452', category: '정책·규제' },
            { id: 502, start: '2025-12-26', end: '2026-01-15', title: '중소기업기술개발제품 우선구매제도 운영 등에 관한 시행세칙 고시 개정 행정예고', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86427', category: '수출·판로' },
            { id: 503, start: '2025-12-26', end: '2026-01-15', title: '중소벤처기업부 규제예보 리스트 12월 1차 입법예고', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86372', category: '정책·규제' },
            { id: 504, start: '2025-12-26', end: '2026-01-15', title: '제조공법이나 원자재를 기준으로 구성된 조합 등의 범위 고시 개정안 행정예고', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86346', category: '정책·규제' },
            { id: 505, start: '2025-12-26', end: '2026-01-15', title: '벤처투자조합 등록 및 관리규정 일부개정안 고시', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86225', category: '금융·자금' },
            { id: 506, start: '2025-12-26', end: '2026-01-15', title: '벤처투자회사 등록 및 관리규정 일부개정 고시', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86224', category: '금융·자금' },
            { id: 507, start: '2025-12-26', end: '2026-01-15', title: '창업기획자 등록 및 관리규정 일부개정 고시', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86223', category: '창업·입주' },
            { id: 508, start: '2025-12-26', end: '2026-01-15', title: '개인투자조합 등록 및 투자확인서 발급규정 일부개정 고시', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86222', category: '금융·자금' },
            { id: 509, start: '2025-11-28', end: '2025-12-18', title: '창업기업 및 국외 창업기업 범위에 관한 규정 일부개정안 행정예고', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86205', category: '정책·규제' },
            { id: 510, start: '2025-12-26', end: '2025-12-31', title: '중소벤처기업부 규제예보 리스트 11월 2차 입법예고 (참고)', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86232', category: '정책·규제' },
            { id: 511, start: '2025-11-27', end: '2025-11-27', title: '장애인기업 확인 요령 일부개정 고시', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86171', category: '정책·규제' },
            { id: 512, start: '2025-11-27', end: '2025-12-17', title: 'World Class 300 프로젝트 운영에 관한 요령 폐지(안) 행정예고', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?pblancId=PBLN_000000000115613', category: '정책·규제' },
            { id: 513, start: '2025-11-21', end: '2025-12-11', title: '벤처투자조합 등록 및 관리규정 일부개정안 행정예고', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86118', category: '금융·자금' },
            { id: 514, start: '2025-11-21', end: '2025-12-11', title: '벤처투자회사 등록 및 관리규정 일부개정안 행정예고', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86117', category: '금융·자금' },
            { id: 515, start: '2025-11-21', end: '2025-12-11', title: '창업기획자 등록 및 관리규정 일부개정안 행정예고', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86116', category: '창업·입주' },
            { id: 516, start: '2025-11-21', end: '2025-12-11', title: '개인투자조합 등록 및 투자확인서 발급규정 일부개정안 행정예고', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86115', category: '금융·자금' },
            { id: 517, start: '2025-11-19', end: '2025-11-19', title: '중소기업자간 경쟁제품 직접생산 확인기준 일부개정 고시', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86080', category: '수출·판로' },
            { id: 518, start: '2025-11-17', end: '2025-12-27', title: '벤처기업육성에 관한 특별법 시행령 일부개정령(안) 입법예고', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86072', category: '정책·규제' },
            { id: 519, start: '2025-11-14', end: '2025-11-14', title: '중소벤처기업부 규제예보 리스트 11월 1차 입법예고', source: '중소벤처기업부', url: 'https://www.bizinfo.go.kr/web/lay1/bbs/S1T122C130/AY/115/view.do?article_seq=86037', category: '정책·규제' },
        ];

        // --- Icons ---
        const IconBase = ({ children, className, ...props }) => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>;
        const Search = (props) => <IconBase {...props}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></IconBase>;
        const CalendarIcon = (props) => <IconBase {...props}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></IconBase>;
        const ExternalLink = (props) => <IconBase {...props}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></IconBase>;
        const LayoutGrid = (props) => <IconBase {...props}><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></IconBase>;
        const List = (props) => <IconBase {...props}><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></IconBase>;
        const Sparkles = (props) => <IconBase {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></IconBase>;
        const TrendingUp = (props) => <IconBase {...props}><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></IconBase>;
        const ChevronDown = (props) => <IconBase {...props}><path d="m6 9 6 6 6-6"/></IconBase>;
        const RefreshCw = (props) => <IconBase {...props}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></IconBase>;
        const Star = (props) => <IconBase {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconBase>;
        const FileSpreadsheet = (props) => <IconBase {...props}><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/></IconBase>;
        const Edit3 = (props) => <IconBase {...props}><path d="M12 20h9"/><path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"/></IconBase>;
        const XIcon = (props) => <IconBase {...props}><line x1="18" x2="6" y1="6" y2="18"/><line x1="6" x2="18" y1="6" y2="18"/></IconBase>;
        const CopyIcon = (props) => <IconBase {...props}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></IconBase>;
        const BellIcon = (props) => <IconBase {...props}><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></IconBase>;

        // 유틸리티
        const getToday = () => { const d = new Date(); d.setHours(0, 0, 0, 0); return d; };
        const getDaysDiff = (targetDate) => {
            const today = getToday();
            const target = new Date(targetDate);
            const diffTime = target - today;
            return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        };
        const getStatus = (start, end) => {
            const today = getToday();
            const sDate = new Date(start);
            const eDate = new Date(end);
            if (eDate < sDate && eDate.getFullYear() < 2000) return { label: '일정 확인 필요', color: 'bg-slate-50 text-slate-500 border-slate-200' };
            if (sDate > today) return { label: '접수예정', color: 'bg-amber-50 text-amber-700 border-amber-200 ring-1 ring-amber-100' };
            if (eDate < today) return { label: '마감됨', color: 'bg-slate-100 text-slate-400 border-slate-200' };
            const dDay = getDaysDiff(end);
            if (dDay <= 7) return { label: `마감임박 (D-${dDay})`, color: 'bg-rose-50 text-rose-600 border-rose-200 ring-1 ring-rose-100 animate-pulse font-bold' };
            return { label: `접수중 (D-${dDay})`, color: 'bg-emerald-50 text-emerald-600 border-emerald-200 ring-1 ring-emerald-100' };
        };
        const formatDate = (dateString, displayDate) => {
            if (displayDate) return displayDate;
            if(!dateString) return '미정';
            const date = new Date(dateString);
            if(isNaN(date.getTime())) return dateString; 
            return `${date.getFullYear()}.${String(date.getMonth() + 1).padStart(2, '0')}.${String(date.getDate()).padStart(2, '0')}`;
        };
        const getLinkInfo = (item) => {
            const hasLink = item.url && item.url.trim() !== '' && item.url !== '#';
            if (hasLink) return { url: item.url, type: 'direct' };
            return { url: `https://www.google.com/search?q=${encodeURIComponent(item.title + ' 공고')}`, type: 'search' };
        };
        const getGoogleCalendarUrl = (item) => {
            if (!item.start || !item.end) return '#';
            const startStr = new Date(item.start).toISOString().replace(/-|:|\.\d\d\d/g, "").slice(0, 8);
            const endRaw = new Date(item.end);
            endRaw.setDate(endRaw.getDate() + 1);
            const endStr = endRaw.toISOString().replace(/-|:|\.\d\d\d/g, "").slice(0, 8);
            return `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(`[마감] ${item.title}`)}&dates=${startStr}/${endStr}&details=${encodeURIComponent(`URL: ${item.url}\n소관부처: ${item.source}\n지원분야: ${item.category}`)}`;
        };

        const DailyDetailModal = ({ isOpen, onClose, date, items, toggleFavorite, favorites, downloadICS, onCopy }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm transition-opacity modal-overlay" onClick={onClose}>
                    <div className="bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[80vh] flex flex-col overflow-hidden modal-content" onClick={e => e.stopPropagation()}>
                        <div className="p-5 border-b border-slate-100 flex justify-between items-center bg-slate-50/50">
                            <div>
                                <h3 className="text-lg font-bold text-slate-800">{date ? `${date.getFullYear()}년 ${date.getMonth() + 1}월 ${date.getDate()}일` : ''}</h3>
                                <p className="text-xs text-slate-500 font-medium mt-0.5">총 <span className="text-indigo-600 font-bold">{items.length}</span>개의 마감 공고가 있습니다.</p>
                            </div>
                            <button onClick={onClose} className="p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-400 hover:text-slate-600"><XIcon className="w-5 h-5" /></button>
                        </div>
                        <div className="overflow-y-auto p-5 space-y-4 custom-scrollbar">
                            {items.length === 0 ? (<div className="text-center py-10 text-slate-400"><p>마감되는 공고가 없습니다.</p></div>) : (
                                items.map(item => {
                                    const isFavorite = favorites.includes(item.id);
                                    const linkInfo = getLinkInfo(item);
                                    return (
                                        <div key={item.id} className="bg-white border border-slate-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow group">
                                            <div className="flex justify-between items-start gap-3 mb-2">
                                                <span className="inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 border border-slate-200">{item.source}</span>
                                                <div className="flex gap-1">
                                                    <button onClick={() => onCopy(item)} className="p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors" title="복사"><CopyIcon className="w-4 h-4" /></button>
                                                    <a href={getGoogleCalendarUrl(item)} target="_blank" rel="noreferrer" className="p-1.5 hover:bg-indigo-50 rounded-lg text-slate-400 hover:text-indigo-600 transition-colors" title="구글 캘린더 등록"><span className="text-xs font-bold">G</span></a>
                                                    <button onClick={(e) => downloadICS(item, e)} className="p-1.5 hover:bg-indigo-50 rounded-lg text-slate-400 hover:text-indigo-600 transition-colors" title="ICS 다운로드"><CalendarIcon className="w-4 h-4" /></button>
                                                    <button onClick={(e) => toggleFavorite(item.id, e)} className={`p-1.5 hover:bg-amber-50 rounded-lg transition-colors ${isFavorite ? 'text-amber-400' : 'text-slate-300 hover:text-amber-400'}`} title="즐겨찾기"><Star className={`w-4 h-4 ${isFavorite ? 'fill-current' : ''}`} /></button>
                                                </div>
                                            </div>
                                            <a href={linkInfo.url} target="_blank" rel="noreferrer" className="block"><h4 className="font-bold text-slate-800 text-sm leading-snug mb-2 hover:text-indigo-600 transition-colors">{item.title}</h4><div className="flex items-center gap-2 text-xs text-slate-500"><span className="text-indigo-600 font-medium bg-indigo-50 px-1.5 py-0.5 rounded">{item.category}</span></div></a>
                                        </div>
                                    );
                                })
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const CalendarView = ({ data, favorites, toggleFavorite, downloadICS, onCopy }) => {
            const [currentDate, setCurrentDate] = useState(new Date());
            const [modalOpen, setModalOpen] = useState(false);
            const [selectedDate, setSelectedDate] = useState(null);
            const [selectedItems, setSelectedItems] = useState([]);
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const firstDayOfMonth = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            const prevMonth = () => setCurrentDate(new Date(year, month - 1, 1));
            const nextMonth = () => setCurrentDate(new Date(year, month + 1, 1));
            
            const handleDateClick = (year, month, day, items) => {
                if (items.length === 0) return; 
                const date = new Date(year, month, day);
                setSelectedDate(date);
                setSelectedItems(items);
                setModalOpen(true);
            };

            const renderDays = () => {
                const days = [];
                for (let i = 0; i < firstDayOfMonth; i++) {
                    days.push(<div key={`prev-empty-${i}`} className="calendar-cell bg-slate-50/50 min-h-[120px]"></div>);
                }
                for (let d = 1; d <= daysInMonth; d++) {
                    const currentDayStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                    const itemsEnding = data.filter(item => item.end === currentDayStr);
                    const todayDate = new Date();
                    const isToday = todayDate.getFullYear() === year && todayDate.getMonth() === month && todayDate.getDate() === d;
                    const dayOfWeek = new Date(year, month, d).getDay();
                    const isSunday = dayOfWeek === 0;
                    const isSaturday = dayOfWeek === 6;
                    
                    let numColor = 'text-slate-700';
                    if (isSunday) numColor = 'text-rose-500';
                    if (isSaturday) numColor = 'text-blue-500';
                    if (isToday) numColor = 'text-indigo-700';
                    const cellBg = isToday ? 'bg-indigo-50/60 ring-1 ring-inset ring-indigo-200' : 'bg-white hover:bg-slate-50';

                    days.push(
                        <div key={d} onClick={() => itemsEnding.length > 0 && handleDateClick(year, month, d, itemsEnding)} className={`calendar-cell relative min-h-[120px] p-2 flex flex-col gap-1 transition-all duration-200 ${cellBg} ${itemsEnding.length > 0 ? 'cursor-pointer' : ''}`}>
                            <div className="flex justify-between items-start mb-1">
                                <div className="flex items-center gap-1">
                                    <span className={`text-sm font-bold w-7 h-7 flex items-center justify-center rounded-full ${isToday ? 'bg-indigo-600 text-white shadow-sm' : numColor}`}>{d}</span>
                                    {isToday && <span className="text-[10px] font-bold text-indigo-600 bg-white px-1.5 py-0.5 rounded border border-indigo-100 shadow-sm">Today</span>}
                                </div>
                            </div>
                            <div className="flex-1 flex flex-col gap-1 overflow-hidden">
                                {itemsEnding.slice(0, 3).map(item => {
                                    const status = getStatus(item.start, item.end);
                                    let dotColor = 'bg-slate-400';
                                    let textColor = 'text-slate-600';
                                    if(status.label.includes('마감임박')) { dotColor = 'bg-rose-500'; textColor = 'text-rose-700 font-medium'; }
                                    else if(status.label.includes('접수중')) { dotColor = 'bg-emerald-500'; }
                                    else if(status.label.includes('접수예정')) { dotColor = 'bg-amber-500'; }
                                    return (
                                        <div key={item.id} className="flex items-center gap-1.5 px-1 py-0.5 rounded hover:bg-slate-100 transition-colors">
                                            <div className={`w-1.5 h-1.5 rounded-full shrink-0 ${dotColor}`}></div>
                                            <span className={`text-[11px] truncate leading-tight ${textColor}`}>{item.title}</span>
                                        </div>
                                    );
                                })}
                                {itemsEnding.length > 3 && (<div className="text-[10px] text-slate-400 pl-2 font-medium hover:text-indigo-500">+ {itemsEnding.length - 3}개 더보기</div>)}
                            </div>
                        </div>
                    );
                }
                const totalCells = days.length;
                const remaining = 7 - (totalCells % 7);
                if (remaining < 7) {
                    for (let i = 0; i < remaining; i++) {
                        days.push(<div key={`next-empty-${i}`} className="calendar-cell bg-slate-50/50 min-h-[120px]"></div>);
                    }
                }
                return days;
            };

            return (
                <>
                    <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden ring-1 ring-slate-900/5">
                        <div className="flex items-center justify-between p-6 border-b border-slate-200 bg-white">
                            <h2 className="text-2xl font-bold text-slate-800 flex items-center gap-3"><span className="bg-indigo-50 text-indigo-600 p-2 rounded-lg shadow-sm"><CalendarIcon className="w-6 h-6" /></span>{year}년 {month + 1}월 일정</h2>
                            <div className="flex gap-1 bg-slate-100 p-1 rounded-xl">
                                <button onClick={prevMonth} className="px-3 py-1.5 hover:bg-white hover:shadow-sm rounded-lg text-slate-600 font-medium text-sm transition-all">◀</button>
                                <button onClick={() => setCurrentDate(new Date())} className="px-4 py-1.5 bg-white shadow-sm rounded-lg text-indigo-600 font-bold text-sm transition-all">이번 달</button>
                                <button onClick={nextMonth} className="px-3 py-1.5 hover:bg-white hover:shadow-sm rounded-lg text-slate-600 font-medium text-sm transition-all">▶</button>
                            </div>
                        </div>
                        <div className="grid grid-cols-7 border-b border-slate-200 bg-slate-50/80">
                            {['일', '월', '화', '수', '목', '금', '토'].map((day, i) => (<div key={day} className={`text-center py-3 text-xs font-bold uppercase tracking-wider ${i === 0 ? 'text-rose-500' : i === 6 ? 'text-blue-500' : 'text-slate-500'}`}>{day}</div>))}
                        </div>
                        <div className="grid grid-cols-7 bg-slate-200 gap-px border-b border-slate-200">{renderDays()}</div>
                        <div className="bg-slate-50 p-2 text-center text-xs text-slate-400 font-medium">* 날짜를 클릭하면 해당 일자의 상세 공고를 확인할 수 있습니다.</div>
                    </div>
                    <DailyDetailModal isOpen={modalOpen} onClose={() => setModalOpen(false)} date={selectedDate} items={selectedItems} toggleFavorite={toggleFavorite} favorites={favorites} downloadICS={downloadICS} onCopy={onCopy} />
                </>
            );
        };

        const App = () => {
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedSource, setSelectedSource] = useState('전체');
            const [selectedCategory, setSelectedCategory] = useState('전체');
            const [selectedStatus, setSelectedStatus] = useState('전체');
            const [selectedPersona, setSelectedPersona] = useState(PERSONAS.ALL);
            const [mainTab, setMainTab] = useState('list');
            const [viewMode, setViewMode] = useState('grid');
            const [showFavoritesOnly, setShowFavoritesOnly] = useState(false);
            const [toast, setToast] = useState({ show: false, message: '' });
            const [favorites, setFavorites] = useState(() => { const saved = localStorage.getItem('sbtl_favorites'); return saved ? JSON.parse(saved) : []; });
            const [memos, setMemos] = useState(() => { const saved = localStorage.getItem('sbtl_memos'); return saved ? JSON.parse(saved) : {}; });
            const [externalData, setExternalData] = useState([]);
            const [loading, setLoading] = useState(false);

            useEffect(() => {
                if (GOOGLE_SHEET_URL) {
                    setLoading(true);
                    Papa.parse(GOOGLE_SHEET_URL, {
                        download: true,
                        header: true,
                        skipEmptyLines: true, // 빈 줄 무시 옵션 추가
                        complete: (results) => {
                            // 데이터가 유효한지 확인 (행 개수가 0보다 커야 함)
                            if (results.data && results.data.length > 0) {
                                setExternalData(results.data);
                            } else {
                                console.warn('CSV 데이터가 비어있습니다. 기본 데이터를 사용합니다.');
                            }
                            setLoading(false);
                        },
                        error: (err) => {
                            console.error('CSV 데이터를 불러오는 중 오류 발생:', err);
                            setLoading(false);
                            // 에러 발생 시에도 기존 상태 유지 (화면이 사라지지 않음)
                        }
                    });
                }
            }, []);

            const combinedData = useMemo(() => {
                // 외부 데이터가 존재하고 유효한 경우에만 사용
                if (externalData.length > 0) {
                    const processed = externalData.map((item, index) => ({
                        id: item.id || item.번호 || `ext-${index}`,
                        start: item.start || item.신청시작일자 || '',
                        end: item.end || item.신청종료일자 || '',
                        title: item.title || item.공고명 || '',
                        source: item.source || item.소관부처 || item.사업수행기관 || '',
                        url: item.url || item.공고상세URL || '',
                        category: item.category || item.지원분야 || ''
                    })).filter(item => item.title && item.title.trim() !== ''); // 제목이 없는 빈 행 필터링
                    
                    if (processed.length > 0) return processed;
                }
                // 외부 데이터가 없거나 오류 시 기본 데이터(RAW_DATA) 반환
                return RAW_DATA;
            }, [externalData]);

            // 전체를 맨 앞으로 정렬
            const availableSources = useMemo(() => ['전체', ...[...new Set(combinedData.map(d => d.source))].sort()], [combinedData]);
            const availableCategories = useMemo(() => ['전체', ...[...new Set(combinedData.map(d => d.category))].sort()], [combinedData]);

            useEffect(() => { localStorage.setItem('sbtl_favorites', JSON.stringify(favorites)); }, [favorites]);
            useEffect(() => { localStorage.setItem('sbtl_memos', JSON.stringify(memos)); }, [memos]);

            const showToast = (message) => { setToast({ show: true, message }); setTimeout(() => setToast({ show: false, message: '' }), 2000); };
            const toggleFavorite = (id, e) => {
                if(e) { e.preventDefault(); e.stopPropagation(); }
                const isAdding = !favorites.includes(id);
                setFavorites(prev => isAdding ? [...prev, id] : prev.filter(fid => fid !== id));
                if(isAdding) showToast("즐겨찾기에 추가되었습니다."); else showToast("즐겨찾기가 해제되었습니다.");
            };
            const handleMemoChange = (id, text) => { setMemos(prev => ({ ...prev, [id]: text })); };
            const handleCopy = (item, e) => {
                if(e) { e.preventDefault(); e.stopPropagation(); }
                const text = `[공고 공유]\n${item.title}\n마감일: ${item.end}\n링크: ${item.url}`;
                if (navigator.clipboard && navigator.clipboard.writeText) { navigator.clipboard.writeText(text).then(() => showToast("클립보드에 복사되었습니다.")); }
                else {
                    const textArea = document.createElement("textarea"); textArea.value = text; document.body.appendChild(textArea); textArea.select();
                    try { document.execCommand('copy'); showToast("클립보드에 복사되었습니다."); } catch (err) {}
                    document.body.removeChild(textArea);
                }
            };
            const downloadCSV = () => {
                const BOM = '\uFEFF';
                const rows = filteredData.map(item => [item.id, `"${item.title.replace(/"/g, '""')}"`, item.source, item.category, item.start, item.end, item.url, `"${(memos[item.id] || '').replace(/"/g, '""')}"`]);
                const csvContent = BOM + ['ID,Title,Source,Category,Start Date,End Date,URL,Memo', ...rows.map(r => r.join(','))].join('\n');
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a'); link.href = URL.createObjectURL(blob); link.download = `sbtl_watchlist_${new Date().toISOString().slice(0,10)}.csv`; link.click();
            };
            const downloadICS = (item, e) => {
                if(e) { e.preventDefault(); e.stopPropagation(); }
                const formatDateICS = (dateStr) => dateStr.replace(/-/g, '');
                const now = new Date().toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
                const icsContent = `BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//SBTL//Watchlist//KO\nBEGIN:VEVENT\nUID:${item.id}@sbtl.watchlist\nDTSTAMP:${now}\nDTSTART;VALUE=DATE:${formatDateICS(item.start)}\nDTEND;VALUE=DATE:${formatDateICS(item.end)}\nSUMMARY:${item.title}\nDESCRIPTION:출처: ${item.source}\\n링크: ${item.url}\nURL:${item.url}\nEND:VEVENT\nEND:VCALENDAR`;
                const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
                const link = document.createElement('a'); link.href = URL.createObjectURL(blob); link.download = `event_${item.id}.ics`; link.click();
            };

            const filteredData = useMemo(() => {
                return combinedData.filter(item => {
                    const matchesSearch = item.title.toLowerCase().includes(searchTerm.toLowerCase());
                    const matchesSource = selectedSource === '전체' || item.source === selectedSource;
                    const matchesCategory = selectedCategory === '전체' || item.category === selectedCategory;
                    const statusObj = getStatus(item.start, item.end);
                    const statusLabel = statusObj.label;
                    let matchesStatus = true;
                    if (selectedStatus === '접수중') matchesStatus = statusLabel.includes('접수중') || statusLabel.includes('마감임박');
                    else if (selectedStatus === '마감임박') matchesStatus = statusLabel.includes('마감임박');
                    else if (selectedStatus === '접수예정') matchesStatus = statusLabel.includes('접수예정');
                    else if (selectedStatus === '마감') matchesStatus = statusLabel.includes('마감');
                    let matchesPersona = true;
                    if (selectedPersona === PERSONAS.SBTL) {
                        const includeKeywords = ['소재', '부품', '장비', '기술', 'R&D', '전략', '제조', '공급망', '산업', '핵심', '뿌리', '혁신', 'MVP', '메가프로젝트', 'GPU', '컴퓨팅', '탄소중립', 'MOTIE', 'KEITI', 'NIPA', 'KEIT', 'KIAT', '소부장', '으뜸기업', '경기', '화성', '수출', '바우처', '스마트공장', '자율형'];
                        const excludeKeywords = ['주민참여', '관광', '동래구', '서민', '금융생활', '청년식당'];
                        const regionKeywords = ['서울', '인천', '제주', '대전', '전남', '충북', '강원', '경북', '경남', '부산', '대구', '울산', '광주', '남양주', '은평', '순천', '보은', '거제', '서귀포'];
                        const isPriorityRegion = item.title.includes('경기') || item.title.includes('화성') || item.source.includes('경기') || item.source.includes('화성') || item.source.includes('이지비즈');
                        const isExcludedRegion = regionKeywords.some(r => item.title.includes(r));
                        const titleMatch = includeKeywords.some(k => item.title.includes(k) || item.source.includes(k));
                        const excludeMatch = excludeKeywords.some(k => item.title.includes(k));
                        if (item.category === '정책·규제') matchesPersona = true; 
                        else matchesPersona = (titleMatch && !excludeMatch && (isPriorityRegion || !isExcludedRegion));
                    }
                    let matchesFavorites = true;
                    if (showFavoritesOnly) matchesFavorites = favorites.includes(item.id);
                    return matchesSearch && matchesSource && matchesCategory && matchesStatus && matchesPersona && matchesFavorites;
                }).sort((a, b) => new Date(a.end) - new Date(b.end)); 
            }, [searchTerm, selectedSource, selectedCategory, selectedStatus, selectedPersona, combinedData, showFavoritesOnly, favorites]);

            const stats = useMemo(() => {
                const today = getToday();
                const total = combinedData.length;
                const active = combinedData.filter(item => new Date(item.start) <= today && new Date(item.end) >= today).length;
                const upcoming = combinedData.filter(item => new Date(item.start) > today).length;
                return { total, active, upcoming };
            }, [combinedData]);

            const urgentItems = useMemo(() => filteredData.filter(item => { const days = getDaysDiff(item.end); return days >= 0 && days <= 7; }), [filteredData]);

            return (
                <div className="min-h-screen font-sans text-slate-900 pb-20 relative">
                    {urgentItems.length > 0 && (
                        <div className="bg-amber-100 border-b border-amber-200 px-4 py-2">
                            <div className="max-w-7xl mx-auto flex items-center justify-center text-sm font-bold text-amber-800 animate-pulse">
                                <BellIcon className="w-4 h-4 mr-2" />
                                <span>이번 주 마감 예정인 공고가 {urgentItems.length}건 있습니다! 놓치지 마세요.</span>
                            </div>
                        </div>
                    )}
                    <header className="bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-30 transition-all duration-300">
                        <div className="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8">
                            <div className="flex flex-col md:flex-row justify-between items-center gap-4">
                                <div>
                                    <h1 className="text-2xl font-black flex items-center gap-3 text-slate-900 tracking-tight">
                                        <div className="bg-gradient-to-br from-indigo-600 to-violet-600 text-white p-2 rounded-xl shadow-lg shadow-indigo-200"><TrendingUp className="h-6 w-6" /></div>
                                        <span>2026 정부 지원사업 Watchlist<span className="block text-xs font-semibold text-slate-400 mt-0.5 tracking-normal font-sans">Strategic Roadmap for SBTL Advanced Materials (v8.3 Final)</span></span>
                                    </h1>
                                </div>
                                <div className="flex gap-3 text-center items-center">
                                     <button onClick={downloadCSV} className="flex flex-col items-center justify-center bg-slate-50 hover:bg-green-50 text-slate-500 hover:text-green-600 rounded-xl p-2 min-w-[80px] border border-slate-100 shadow-sm transition-colors group" title="Excel(CSV) 다운로드"><FileSpreadsheet className="w-5 h-5 mb-1 text-slate-400 group-hover:text-green-600 group-hover:scale-110 transition-all" /><span className="text-[10px] font-bold">Export</span></button>
                                    <div className="w-px h-10 bg-slate-200 mx-1"></div>
                                    <div className="bg-white rounded-xl p-3 min-w-[90px] border border-slate-100 shadow-sm hover:shadow-md transition-shadow"><div className="text-2xl font-black text-emerald-600 tracking-tighter tabular-nums">{stats.active}</div><div className="text-[11px] uppercase tracking-wider text-slate-400 font-bold">Active</div></div>
                                    <div className="bg-white rounded-xl p-3 min-w-[90px] border border-slate-100 shadow-sm hover:shadow-md transition-shadow"><div className="text-2xl font-black text-indigo-600 tracking-tighter tabular-nums">{stats.upcoming}</div><div className="text-[11px] uppercase tracking-wider text-slate-400 font-bold">Upcoming</div></div>
                                </div>
                            </div>
                        </div>
                    </header>
                    <main className="max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
                        <div className="flex justify-center mb-8">
                            <div className="bg-slate-100 p-1.5 rounded-2xl flex gap-1 shadow-inner">
                                <button onClick={() => setMainTab('list')} className={`px-8 py-3 rounded-xl text-sm font-bold transition-all flex items-center gap-2 ${mainTab === 'list' ? 'bg-white text-indigo-600 shadow-sm ring-1 ring-black/5' : 'text-slate-500 hover:text-slate-700 hover:bg-slate-200/50'}`}><List className="w-4 h-4" /> 공고 리스트</button>
                                <button onClick={() => setMainTab('calendar')} className={`px-8 py-3 rounded-xl text-sm font-bold transition-all flex items-center gap-2 ${mainTab === 'calendar' ? 'bg-white text-indigo-600 shadow-sm ring-1 ring-black/5' : 'text-slate-500 hover:text-slate-700 hover:bg-slate-200/50'}`}><CalendarIcon className="w-4 h-4" /> 월별 일정</button>
                            </div>
                        </div>
                        {mainTab === 'list' && (
                            <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-1 mb-8 animate-in fade-in slide-in-from-bottom-2 duration-300">
                                <div className="flex flex-col lg:flex-row gap-0">
                                    <div className="relative flex-1"><div className="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none"><Search className="h-5 w-5 text-slate-400" /></div><input type="text" className="block w-full pl-12 pr-4 py-4 rounded-xl leading-5 bg-transparent placeholder-slate-400 focus:outline-none focus:bg-slate-50 transition-colors text-sm font-medium" placeholder="공고명, 기관명, 키워드 검색..." value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} /></div>
                                    <div className="w-px bg-slate-100 my-2 hidden lg:block"></div>
                                    <div className="flex flex-wrap items-center gap-4 p-4 bg-slate-50 rounded-xl border border-slate-100">
                                        <div className="flex flex-col gap-1"><label className="text-[10px] font-bold text-slate-400 uppercase tracking-wider">소관부처/기관</label><div className="relative"><select value={selectedSource} onChange={(e) => setSelectedSource(e.target.value)} className="appearance-none bg-white border border-slate-200 text-slate-700 py-2 pl-3 pr-8 rounded-lg text-xs font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:bg-slate-50 transition-colors w-full min-w-[140px]">{availableSources.map(source => (<option key={source} value={source}>{source}</option>))}</select><ChevronDown className="absolute right-2 top-1/2 transform -translate-y-1/2 w-3 h-3 text-slate-400 pointer-events-none" /></div></div>
                                        <div className="flex flex-col gap-1"><label className="text-[10px] font-bold text-slate-400 uppercase tracking-wider">지원분야</label><div className="relative"><select value={selectedCategory} onChange={(e) => setSelectedCategory(e.target.value)} className="appearance-none bg-white border border-slate-200 text-slate-700 py-2 pl-3 pr-8 rounded-lg text-xs font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:bg-slate-50 transition-colors w-full min-w-[140px]">{availableCategories.map(cat => (<option key={cat} value={cat}>{cat}</option>))}</select><ChevronDown className="absolute right-2 top-1/2 transform -translate-y-1/2 w-3 h-3 text-slate-400 pointer-events-none" /></div></div>
                                        <div className="flex flex-col gap-1"><label className="text-[10px] font-bold text-slate-400 uppercase tracking-wider">접수상태</label><div className="relative"><select value={selectedStatus} onChange={(e) => setSelectedStatus(e.target.value)} className="appearance-none bg-white border border-slate-200 text-slate-700 py-2 pl-3 pr-8 rounded-lg text-xs font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:bg-slate-50 transition-colors w-full min-w-[140px]">{STATUSES.map(status => (<option key={status} value={status}>{status}</option>))}</select><ChevronDown className="absolute right-2 top-1/2 transform -translate-y-1/2 w-3 h-3 text-slate-400 pointer-events-none" /></div></div>
                                        <div className="flex flex-col gap-1"><label className="text-[10px] font-bold text-slate-400 uppercase tracking-wider">즐겨찾기</label><button onClick={() => setShowFavoritesOnly(!showFavoritesOnly)} className={`h-[34px] px-3 rounded-lg border transition-colors flex items-center justify-center gap-1.5 ${showFavoritesOnly ? 'bg-amber-50 border-amber-200 text-amber-600 font-bold' : 'bg-white border-slate-200 text-slate-500 hover:text-amber-500'}`} title="즐겨찾기만 보기"><Star className={`w-3.5 h-3.5 ${showFavoritesOnly ? 'fill-current' : ''}`} /><span className="text-xs">모아보기</span></button></div>
                                        <div className="flex flex-col gap-1"><label className="text-[10px] font-bold text-transparent select-none">초기화</label><button onClick={() => {setSearchTerm(''); setSelectedSource('전체'); setSelectedCategory('전체'); setSelectedStatus('전체'); setSelectedPersona(PERSONAS.ALL); setShowFavoritesOnly(false);}} className="h-[34px] px-3 rounded-lg bg-white border border-slate-200 text-slate-500 hover:text-indigo-600 hover:border-indigo-200 hover:bg-indigo-50 transition-colors flex items-center justify-center" title="필터 초기화"><RefreshCw className="w-3 h-3" /><span className="ml-1.5 text-xs font-bold">초기화</span></button></div>
                                    </div>
                                </div>
                                <div className="w-px bg-slate-100 my-2 hidden lg:block"></div>
                                <div className="flex items-center gap-1 p-2 justify-end">
                                    <button onClick={() => setViewMode('grid')} className={`p-2.5 rounded-lg transition-all ${viewMode === 'grid' ? 'bg-slate-100 text-slate-900 shadow-sm' : 'text-slate-400 hover:text-slate-600 hover:bg-slate-50'}`} title="카드 뷰"><LayoutGrid className="h-5 w-5" /></button>
                                    <button onClick={() => setViewMode('list')} className={`p-2.5 rounded-lg transition-all ${viewMode === 'list' ? 'bg-slate-100 text-slate-900 shadow-sm' : 'text-slate-400 hover:text-slate-600 hover:bg-slate-50'}`} title="리스트 뷰"><List className="h-5 w-5" /></button>
                                </div>
                            </div>
                        )}
                        {mainTab === 'list' && (
                            <div className="mb-8 flex flex-wrap gap-3 justify-center md:justify-start">
                                <button onClick={() => setSelectedPersona(PERSONAS.ALL)} className={`flex items-center gap-2 px-5 py-2.5 rounded-full text-sm font-bold transition-all duration-200 shadow-sm hover:shadow-md ${selectedPersona === PERSONAS.ALL ? 'bg-slate-800 text-white ring-2 ring-slate-800 ring-offset-2' : 'bg-white text-slate-500 border border-slate-200 hover:bg-slate-50 hover:text-slate-800'}`}>전체 보기</button>
                                <button onClick={() => setSelectedPersona(PERSONAS.SBTL)} className={`flex items-center gap-2 px-5 py-2.5 rounded-full text-sm font-bold transition-all duration-200 shadow-sm hover:shadow-md ${selectedPersona === PERSONAS.SBTL ? 'bg-gradient-to-r from-indigo-600 to-violet-600 text-white ring-2 ring-indigo-500 ring-offset-2' : 'bg-white text-slate-500 border border-slate-200 hover:bg-indigo-50 hover:text-indigo-600 hover:border-indigo-100'}`}><Sparkles className="w-4 h-4" />SBTL 첨단소재 맞춤</button>
                            </div>
                        )}
                        {loading && <div className="text-center py-4 text-slate-500">데이터를 불러오는 중...</div>}
                        {error && <div className="text-center py-4 text-red-500">{error}</div>}
                        {mainTab === 'list' && (
                            <div className="flex justify-between items-center mb-6 px-2">
                                <div className="flex items-center gap-3"><span className="text-sm font-bold text-slate-700">검색 결과 <span className="text-indigo-600 ml-1 tabular-nums">{filteredData.length}</span>건</span>{selectedPersona !== PERSONAS.ALL && (<span className="flex items-center gap-1.5 text-[10px] font-bold bg-indigo-50 text-indigo-600 px-2.5 py-1 rounded-full border border-indigo-100 uppercase tracking-wide"><Sparkles className="w-3 h-3" />SBTL Filter Active</span>)}{showFavoritesOnly && (<span className="flex items-center gap-1.5 text-[10px] font-bold bg-amber-50 text-amber-600 px-2.5 py-1 rounded-full border border-amber-100 uppercase tracking-wide"><Star className="w-3 h-3 fill-current" />Favorites</span>)}</div>
                                <div className="text-xs text-slate-400 font-medium hidden sm:block tabular-nums">Last updated: {new Date().toISOString().split('T')[0]}</div>
                            </div>
                        )}
                        {mainTab === 'calendar' && (<div className="animate-in fade-in slide-in-from-bottom-4 duration-500"><CalendarView data={filteredData} favorites={favorites} toggleFavorite={toggleFavorite} downloadICS={downloadICS} onCopy={handleCopy} /></div>)}
                        {mainTab === 'list' && viewMode === 'grid' && (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500">
                                {filteredData.map((item) => {
                                    const status = getStatus(item.start, item.end);
                                    const linkInfo = getLinkInfo(item);
                                    const isFavorite = favorites.includes(item.id);
                                    const sbtlKeyword = (item.title.includes('소부장') || item.title.includes('화성') || item.title.includes('수출') || item.title.includes('기술개발'));
                                    return (
                                        <div key={item.id} className="group relative bg-white rounded-2xl border border-slate-200/80 overflow-hidden hover:shadow-xl hover:shadow-indigo-500/10 hover:border-indigo-500/30 hover:-translate-y-1 transition-all duration-300 flex flex-col h-full">
                                            <div className={`absolute top-0 left-0 h-1.5 w-full bg-gradient-to-r from-indigo-500 via-violet-500 to-fuchsia-500`} />
                                            <div className="absolute top-4 right-4 flex gap-2 z-10">
                                                <button onClick={(e) => handleCopy(item, e)} className="p-1.5 bg-white rounded-full border border-slate-200 text-slate-400 hover:text-indigo-600 hover:border-indigo-200 shadow-sm transition-colors" title="복사"><CopyIcon className="w-4 h-4" /></button>
                                                <a href={getGoogleCalendarUrl(item)} target="_blank" rel="noreferrer" className="p-1.5 bg-white rounded-full border border-slate-200 text-slate-400 hover:text-indigo-600 hover:border-indigo-200 shadow-sm transition-colors flex items-center justify-center w-7 h-7 font-bold text-xs" title="구글 캘린더 등록">G</a>
                                                <button onClick={(e) => downloadICS(item, e)} className="p-1.5 bg-white rounded-full border border-slate-200 text-slate-400 hover:text-indigo-600 hover:border-indigo-200 shadow-sm transition-colors" title="파일 다운로드 (.ics)"><CalendarIcon className="w-4 h-4" /></button>
                                                <button onClick={(e) => toggleFavorite(item.id, e)} className={`p-1.5 bg-white rounded-full border shadow-sm transition-colors ${isFavorite ? 'text-amber-400 border-amber-200' : 'text-slate-300 border-slate-200 hover:text-amber-400 hover:border-amber-200'}`} title="즐겨찾기"><Star className={`w-4 h-4 ${isFavorite ? 'fill-current' : ''}`} /></button>
                                            </div>
                                            <a href={linkInfo.url} target="_blank" rel="noreferrer" className="flex-1 flex flex-col p-6 cursor-pointer">
                                                <div className="flex flex-wrap gap-2 mb-3 pr-32">
                                                    <span className={`inline-flex items-center px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wide border shadow-sm ${status.color}`}>{status.label}</span>
                                                    <span className="inline-flex items-center px-2 py-1 rounded-md text-[10px] font-bold text-slate-600 bg-slate-50 border border-slate-200">{item.source}</span>
                                                    <span className="inline-flex items-center px-2 py-1 rounded-md text-[10px] font-bold text-indigo-600 bg-indigo-50 border border-indigo-100">{item.category}</span>
                                                    {sbtlKeyword && (<span className="inline-flex items-center px-2 py-1 rounded-md text-[10px] font-bold text-pink-600 bg-pink-50 border border-pink-100">추천</span>)}
                                                </div>
                                                <h3 className="text-[17px] font-bold text-slate-800 leading-snug mb-4 group-hover:text-indigo-600 transition-colors break-keep tracking-tight line-clamp-2 h-[3.2em]">{item.title}</h3>
                                                <div className="mt-auto pt-4 border-t border-slate-50">
                                                    <div className="flex flex-col gap-1.5 text-sm">
                                                        <div className="flex justify-between items-center"><span className="text-slate-400 font-bold text-[10px] uppercase tracking-wider">Start</span><span className="font-mono text-slate-600 font-semibold tracking-tight tabular-nums">{formatDate(item.start, item.displayDate?.split(' ~ ')[0])}</span></div>
                                                        <div className="flex justify-between items-center"><span className="text-slate-400 font-bold text-[10px] uppercase tracking-wider">End</span><span className={`font-mono font-bold tracking-tight tabular-nums ${status.label.includes('마감임박') ? 'text-rose-600' : 'text-slate-800'}`}>{formatDate(item.end, item.displayDate?.split(' ~ ')[1])}</span></div>
                                                    </div>
                                                </div>
                                            </a>
                                            <div className="px-6 pb-6 pt-0">
                                                <div className="relative">
                                                    <div className="absolute top-2.5 left-3 text-slate-400 pointer-events-none"><Edit3 className="w-3 h-3" /></div>
                                                    <textarea className="memo-area w-full bg-slate-50 border border-slate-200 rounded-lg py-2 pl-8 pr-3 text-xs text-slate-600 placeholder-slate-400 focus:outline-none resize-none" rows="1" placeholder="메모를 입력하세요..." value={memos[item.id] || ''} onChange={(e) => handleMemoChange(item.id, e.target.value)} onClick={(e) => e.stopPropagation()} />
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}
                        {mainTab === 'list' && viewMode === 'list' && (
                            <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-500">
                                <div className="overflow-x-auto">
                                    <table className="w-full text-sm text-left text-slate-600">
                                        <thead className="text-xs text-slate-700 uppercase bg-slate-50 border-b border-slate-200">
                                            <tr>
                                                <th scope="col" className="px-4 py-3 whitespace-nowrap font-bold">상태</th>
                                                <th scope="col" className="px-4 py-3 whitespace-nowrap font-bold">소관부처</th>
                                                <th scope="col" className="px-4 py-3 whitespace-nowrap font-bold">지원분야</th>
                                                <th scope="col" className="px-4 py-3 min-w-[300px] font-bold">공고명</th>
                                                <th scope="col" className="px-4 py-3 whitespace-nowrap text-center font-bold">마감일</th>
                                                <th scope="col" className="px-4 py-3 whitespace-nowrap text-center font-bold">관리</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {filteredData.map((item) => {
                                                const status = getStatus(item.start, item.end);
                                                const linkInfo = getLinkInfo(item);
                                                const isFavorite = favorites.includes(item.id);
                                                return (
                                                    <tr key={item.id} className="bg-white border-b border-slate-100 hover:bg-slate-50 transition-colors group">
                                                        <td className="px-4 py-3 whitespace-nowrap"><span className={`inline-block px-2 py-0.5 rounded text-[10px] font-bold border ${status.color}`}>{status.label}</span></td>
                                                        <td className="px-4 py-3 whitespace-nowrap font-medium text-slate-900 tracking-tight">{item.source}</td>
                                                        <td className="px-4 py-3 whitespace-nowrap text-indigo-600 font-medium tracking-tight">{item.category}</td>
                                                        <td className="px-4 py-3"><a href={linkInfo.url} target="_blank" rel="noreferrer" className="text-slate-800 font-bold hover:text-indigo-600 hover:underline flex items-center gap-2 tracking-tight">{item.title}<ExternalLink className="w-3 h-3 text-slate-400" /></a></td>
                                                        <td className="px-4 py-3 whitespace-nowrap text-center font-mono font-medium text-slate-600 tabular-nums">{formatDate(item.end, item.displayDate?.split(' ~ ')[1])}</td>
                                                        <td className="px-4 py-3 whitespace-nowrap text-center">
                                                            <div className="flex items-center justify-center gap-2">
                                                                <button onClick={(e) => handleCopy(item, e)} className="text-slate-300 hover:text-slate-600 p-1 rounded-full hover:bg-slate-100 transition-colors" title="복사"><CopyIcon className="w-4 h-4" /></button>
                                                                <a href={getGoogleCalendarUrl(item)} target="_blank" rel="noreferrer" className="text-slate-400 hover:text-indigo-600 font-bold text-xs p-1" title="구글 캘린더">G</a>
                                                                <button onClick={(e) => toggleFavorite(item.id, e)} className={`transition-colors p-1 rounded-full hover:bg-slate-100 ${isFavorite ? 'text-amber-400' : 'text-slate-300 hover:text-amber-400'}`}><Star className={`w-4 h-4 ${isFavorite ? 'fill-current' : ''}`} /></button>
                                                                <button onClick={(e) => downloadICS(item, e)} className="text-slate-300 hover:text-indigo-600 p-1 rounded-full hover:bg-slate-100 transition-colors"><CalendarIcon className="w-4 h-4" /></button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                );
                                            })}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}
                        {mainTab === 'list' && filteredData.length === 0 && (
                            <div className="text-center py-24 bg-white rounded-3xl border-2 border-dashed border-slate-200">
                                <div className="bg-slate-50 p-4 rounded-full inline-block mb-4"><Search className="h-8 w-8 text-slate-400" /></div>
                                <h3 className="text-lg font-bold text-slate-900">검색 결과가 없습니다</h3>
                                <p className="mt-2 text-sm text-slate-500">다른 키워드로 검색하거나 필터를 초기화해보세요.</p>
                                <button onClick={() => {setSearchTerm(''); setSelectedSource('전체'); setSelectedCategory('전체'); setSelectedStatus('전체'); setSelectedPersona(PERSONAS.ALL); setShowFavoritesOnly(false);}} className="mt-6 text-sm font-bold text-indigo-600 hover:text-indigo-700 underline">필터 초기화</button>
                            </div>
                        )}
                    </main>
                    {toast.show && (<div className="fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white px-6 py-3 rounded-full shadow-lg text-sm font-bold flex items-center gap-2 z-50 toast-enter"><span className="text-indigo-400">✨</span> {toast.message}</div>)}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>